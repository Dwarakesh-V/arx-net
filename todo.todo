node and link rendering logic to be globalized